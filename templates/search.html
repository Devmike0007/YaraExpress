{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recherche | Yara</title>
    <link rel="stylesheet" href="{% static 'css/search.css' %}">
</head>
<body>
    <!-- HEADER -->
<header>
    <div class="logo">
        <img src="{% static 'img/logos2.png' %}" alt="Logo Yara">
    </div>
    <button class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <ul id="nav-menu">
        <!-- <li><a href="{% url 'home' %}">Accueil</a></li> -->
        <li><a href="{% url 'home' %}">Boutique</a></li>
        <li><a href="{% url 'about' %}">À propos</a></li>
    </ul>
    <div class="parametre">
         <a href="{% url 'panier' %}"><img src="{% static 'img/shopping.png' %}" alt=""></a>

        <a href="{% url 'recherche' %}"><img src="{% static 'img/search.png' %}" alt="Recherche"></a>
            {% if user.is_authenticated %}
                <a href="{% url 'profile' %}">
                    {% if user.profile.photo %}
                        <img src="{{ user.profile.photo.url }}" alt="Avatar" style="height:40px;width:40px;border-radius:50%;object-fit:cover;">
                    {% else %}
                        <img src="{% static 'img/utilisateur.png' %}" alt="Utilisateur">
                    {% endif %}
                </a>
            {% else %}
                <a href="{% url 'login' %}"><img src="{% static 'img/utilisateur.png' %}" alt="Connexion"></a>
            {% endif %}
    </div>
</header>
    

    <main class="container">
        <!-- Barre de recherche -->
        <form action="{% url 'recherche' %}" method="get">
            <img src="{% static 'img/search.png' %}" alt="">
            <input type="text" placeholder="Rechercher un produit" name="recherche" required>
            <button type="submit">Rechercher</button>
        </form>
        <!-- RESULTATS DE RECHERCHE -->

        <h1>Résultats pour "{{ query }}"</h1>

        <div class="products">
                {% for Product in products %}
                <div class="produit_card">
                    <img src="{{ Product.image.url }}" alt="">
                    <div class="text">
                        <div class="left">
                            <h3>{{ Product.titre }}</h3>
                        </div>
                        <div class="badge">
                                <img src="{% static 'img/approved.png' %}" alt="">
                              </div>
                        
                    </div>

                    
                    <div class="bas">
                        <form method="post" action="{% url 'ajouter_au_panier' Product.id %}" style="width: 100%; display: flex; gap: 10px; border: none;">
                            {% csrf_token %}
                            <button type="submit">Ajouter au panier</button>
                        </form>
                    </div>
                </div>                 
                {% endfor %}

            <!-- Produit 2 -->

            <!-- Tu peux ajouter d'autres produits ici -->
        </div>
    </main>

<!-- FOOTER -->
<footer class="footer">
    <div class="footer-bottom">
        <p>&copy; 2026 Yara Express. Tous droits réservés.</p>
    </div>
</footer>

<script>
    // Hamburger Menu Toggle
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('nav-menu');

    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navMenu.classList.toggle('active');
    });

    // Fermer le menu quand on clique sur un lien
    navMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        });
    });
</script>
</body>
</html>
